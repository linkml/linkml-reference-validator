{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"linkml-reference-validator","text":"<p>Validate quotes and excerpts against their source publications</p> <p>linkml-reference-validator ensures that text excerpts in your data accurately match their cited sources. It fetches references from PubMed/PMC, DOIs, local files, and URLs, then performs deterministic substring matching with support for editorial conventions like brackets <code>[...]</code> and ellipsis <code>...</code>.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Deterministic validation - No fuzzy matching or AI hallucinations</li> <li>Multiple reference sources - PubMed, DOIs, local files, and URLs</li> <li>Editorial convention support - Handles <code>[clarifications]</code> and <code>...</code> ellipsis</li> <li>Multiple interfaces - CLI for quick checks, Python API for integration</li> <li>LinkML integration - Validates data files with <code>linkml:excerpt</code> annotations</li> <li>Smart caching - Stores references locally to avoid repeated API calls</li> </ul>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Quickstart - Get started in 5 minutes</li> <li>CLI Reference - Complete command documentation</li> <li>How It Works - Understanding the validation process</li> <li>Editorial Conventions - Using brackets and ellipsis</li> </ul>"},{"location":"#tutorials","title":"Tutorials","text":"<ul> <li>Getting Started (CLI) - Validate quotes from the command line</li> <li>Advanced Usage (CLI) - Batch processing with LinkML schemas</li> <li>Python API - Programmatic usage for custom applications</li> </ul>"},{"location":"about/","title":"About linkml-reference-validator","text":"<p>Validation of supporting text from references and publications</p>"},{"location":"quickstart/","title":"Quickstart","text":"<p>Get started with linkml-reference-validator in 5 minutes.</p>"},{"location":"quickstart/#installation","title":"Installation","text":"<pre><code>pip install linkml-reference-validator\n</code></pre> <p>Or with uv:</p> <pre><code>uv pip install linkml-reference-validator\n</code></pre>"},{"location":"quickstart/#validate-a-single-quote","title":"Validate a Single Quote","text":"<p>The most common use case - verify that a quote appears in its cited reference:</p> <pre><code>linkml-reference-validator validate text \\\n  \"MUC1 oncoprotein blocks nuclear targeting of c-Abl\" \\\n  PMID:16888623\n</code></pre> <p>Output:</p> <pre><code>Validating text against PMID:16888623...\n  Text: MUC1 oncoprotein blocks nuclear targeting of c-Abl\n\nResult:\n  Valid: True\n  Message: Supporting text validated successfully in PMID:16888623\n</code></pre> <p>The reference is automatically fetched from PubMed and cached locally in <code>references_cache/</code>.</p>"},{"location":"quickstart/#validate-data-files","title":"Validate Data Files","text":"<p>For batch validation, create a LinkML schema and data file:</p> <p>schema.yaml:</p> <pre><code>id: https://example.org/my-schema\nname: my-schema\n\nprefixes:\n  linkml: https://w3id.org/linkml/\n\nclasses:\n  Statement:\n    attributes:\n      id:\n        identifier: true\n      supporting_text:\n        slot_uri: linkml:excerpt\n      reference:\n        slot_uri: linkml:authoritative_reference\n</code></pre> <p>data.yaml:</p> <pre><code>- id: stmt1\n  supporting_text: MUC1 oncoprotein blocks nuclear targeting of c-Abl\n  reference: PMID:16888623\n</code></pre> <p>Validate:</p> <pre><code>linkml-reference-validator validate data \\\n  data.yaml \\\n  --schema schema.yaml \\\n  --target-class Statement\n</code></pre>"},{"location":"quickstart/#validate-against-a-doi","title":"Validate Against a DOI","text":"<p>You can also validate text against DOIs using the Crossref API:</p> <pre><code>linkml-reference-validator validate text \\\n  \"Nanometre-scale thermometry\" \\\n  DOI:10.1038/nature12373\n</code></pre> <p>This works the same way as PMID validation - the reference is fetched and cached locally.</p>"},{"location":"quickstart/#validate-against-local-files","title":"Validate Against Local Files","text":"<p>You can also validate against local markdown, text, or HTML files:</p> <pre><code>linkml-reference-validator validate text \\\n  \"JAK1 binds to the receptor complex\" \\\n  file:./research/jak-notes.md\n</code></pre>"},{"location":"quickstart/#validate-against-urls","title":"Validate Against URLs","text":"<p>Web pages can also be used as references:</p> <pre><code>linkml-reference-validator validate text \\\n  \"Climate change affects biodiversity\" \\\n  url:https://example.org/climate-report.html\n</code></pre>"},{"location":"quickstart/#key-features","title":"Key Features","text":"<ul> <li>Automatic Caching: References cached locally after first fetch</li> <li>Editorial Notes: Use <code>[...]</code> for clarifications: <code>\"MUC1 [mucin 1] oncoprotein\"</code></li> <li>Ellipsis: Use <code>...</code> for omitted text: <code>\"MUC1 ... nuclear targeting\"</code></li> <li>Deterministic Matching: Substring-based (not AI/fuzzy matching)</li> <li>PubMed &amp; PMC: Fetches from NCBI automatically</li> <li>DOI Support: Fetches metadata from Crossref API</li> <li>Local Files: Validate against markdown, text, or HTML files</li> <li>URL Support: Validate against web pages</li> </ul>"},{"location":"quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Tutorial 1: Getting Started - CLI basics with real examples</li> <li>Tutorial 2: Advanced Usage - Data validation with LinkML schemas</li> <li>Concepts - Understanding the validation process</li> <li>CLI Reference - Complete command documentation</li> </ul>"},{"location":"todo/","title":"Future Enhancements","text":"<p>This document tracks potential enhancements that could be ported from ai-gene-review.</p>"},{"location":"todo/#common-issue-detection-from-ai-gene-review","title":"Common Issue Detection (from ai-gene-review)","text":"<p>The following issue detection features are available in ai-gene-review's <code>SupportingTextSubstringValidator</code> class and could be added to linkml-reference-validator:</p>"},{"location":"todo/#1-ellipsis-detection","title":"1. Ellipsis Detection","text":"<p>Detect when <code>...</code> causes validation issues and suggest using only the first part of the quote:</p> <pre><code>if \"...\" in supporting_text:\n    first_part = supporting_text.split(\"...\")[0].strip()\n    suggestions.append(f\"Remove '...' - use only first part: \\\"{first_part}\\\"\")\n</code></pre>"},{"location":"todo/#2-short-text-detection","title":"2. Short Text Detection","text":"<p>Warn when query text is too short (&lt;20 chars after removing brackets):</p> <pre><code>if len(non_bracket_text) &lt; MIN_SPAN_LENGTH:\n    suggestions.append(f\"Too short ({len(non_bracket_text)} chars) - extend with context from source\")\n</code></pre>"},{"location":"todo/#3-bracket-ratio-detection","title":"3. Bracket Ratio Detection","text":"<p>Warn when bracketed content exceeds the actual quoted content:</p> <pre><code>bracket_content = ''.join(re.findall(r'\\[.*?\\]', supporting_text))\nif len(bracket_content) &gt; len(non_bracket_text):\n    suggestions.append(\"More brackets than quotes - reduce editorial additions\")\n</code></pre>"},{"location":"todo/#4-all-bracketed-detection","title":"4. All-Bracketed Detection","text":"<p>Error when supporting_text is entirely in brackets (no actual quoted text):</p> <pre><code>if total_query_length == 0:\n    return (\n        False,\n        \"Supporting text contains no quotable text - all content is in [brackets]. \"\n        \"Supporting text must contain actual quoted text from the source.\"\n    )\n</code></pre>"},{"location":"todo/#5-smart-editorial-bracket-detection","title":"5. Smart Editorial Bracket Detection","text":"<p>The <code>is_editorial_bracket()</code> method distinguishes between editorial notes and scientific notation:</p> <ul> <li>Editorial brackets (removed): <code>[important]</code>, <code>[The protein]</code>, <code>[according to studies]</code></li> <li>Scientific notation (kept): <code>[+21]</code>, <code>[G14]</code>, <code>[Ca 2+]</code>, <code>[Mg2+]</code></li> </ul>"},{"location":"todo/#reference-code","title":"Reference Code","text":"<p>See the following files in ai-gene-review for implementation details:</p> <ul> <li><code>src/ai_gene_review/validation/supporting_text_validator.py</code>:</li> <li><code>SupportingTextSubstringValidator</code> class</li> <li><code>generate_suggested_fix()</code> method (full version with issue detection)</li> <li> <p><code>is_editorial_bracket()</code> method</p> </li> <li> <p><code>src/ai_gene_review/validation/fuzzy_text_utils.py</code>:</p> </li> <li><code>find_fuzzy_match_with_context()</code> for position-aware matching</li> </ul>"},{"location":"concepts/editorial-conventions/","title":"Editorial Conventions","text":"<p>How to use brackets and ellipsis in supporting text quotes.</p>"},{"location":"concepts/editorial-conventions/#overview","title":"Overview","text":"<p>When citing scientific text, you often need to: - Add clarifications that weren't in the original - Omit portions of text between relevant parts</p> <p>linkml-reference-validator supports standard editorial conventions for these cases.</p>"},{"location":"concepts/editorial-conventions/#square-brackets","title":"Square Brackets <code>[...]</code>","text":"<p>Use square brackets to insert editorial clarifications that should be ignored during validation.</p>"},{"location":"concepts/editorial-conventions/#basic-usage","title":"Basic Usage","text":"<p>Reference text:</p> <pre><code>\"MUC1 oncoprotein blocks nuclear targeting of c-Abl\"\n</code></pre> <p>Your quote with clarification:</p> <pre><code>\"MUC1 [mucin 1] oncoprotein blocks nuclear targeting of c-Abl\"\n</code></pre> <p>The <code>[mucin 1]</code> is ignored during matching, so this validates successfully.</p>"},{"location":"concepts/editorial-conventions/#common-uses","title":"Common Uses","text":""},{"location":"concepts/editorial-conventions/#expanding-abbreviations","title":"Expanding Abbreviations","text":"<pre><code>Reference: \"TP53 functions in cell cycle regulation\"\nYour quote: \"TP53 [tumor protein p53] functions in cell cycle regulation\"\n</code></pre>"},{"location":"concepts/editorial-conventions/#adding-context","title":"Adding Context","text":"<pre><code>Reference: \"The protein blocks nuclear targeting\"\nYour quote: \"The protein [MUC1] blocks nuclear targeting\"\n</code></pre>"},{"location":"concepts/editorial-conventions/#clarifying-pronouns","title":"Clarifying Pronouns","text":"<pre><code>Reference: \"It regulates transcription\"\nYour quote: \"It [BRCA1] regulates transcription\"\n</code></pre>"},{"location":"concepts/editorial-conventions/#multiple-brackets","title":"Multiple Brackets","text":"<p>You can use multiple editorial notes in one quote:</p> <pre><code>\"The protein [MUC1] blocks nuclear targeting of c-Abl [a tyrosine kinase]\"\n</code></pre> <p>Both bracketed portions are removed before matching.</p>"},{"location":"concepts/editorial-conventions/#nested-brackets","title":"Nested Brackets","text":"<p>Nested brackets are not recommended and may not work as expected:</p> <pre><code>\u274c \"MUC1 [mucin 1 [a membrane protein]] blocks targeting\"\n\u2705 \"MUC1 [mucin 1, a membrane protein] blocks targeting\"\n</code></pre>"},{"location":"concepts/editorial-conventions/#ellipsis","title":"Ellipsis <code>...</code>","text":"<p>Use ellipsis (three dots) to indicate omitted text between parts of a quote.</p>"},{"location":"concepts/editorial-conventions/#basic-usage_1","title":"Basic Usage","text":"<p>Reference text:</p> <pre><code>\"MUC1 oncoprotein blocks nuclear targeting of c-Abl in the apoptotic response\"\n</code></pre> <p>Your quote with ellipsis:</p> <pre><code>\"MUC1 oncoprotein ... apoptotic response\"\n</code></pre> <p>Both parts must exist in the reference.</p>"},{"location":"concepts/editorial-conventions/#how-it-works","title":"How It Works","text":"<p>The validator: 1. Splits on <code>...</code> \u2192 <code>[\"MUC1 oncoprotein\", \"apoptotic response\"]</code> 2. Normalizes each part 3. Checks that both appear in the reference content 4. Returns valid only if both parts are found</p>"},{"location":"concepts/editorial-conventions/#common-uses_1","title":"Common Uses","text":""},{"location":"concepts/editorial-conventions/#removing-middle-content","title":"Removing Middle Content","text":"<pre><code>Reference: \"BRCA1 plays a critical role in DNA repair mechanisms through homologous recombination\"\nYour quote: \"BRCA1 plays a critical role in DNA repair ... homologous recombination\"\n</code></pre>"},{"location":"concepts/editorial-conventions/#extracting-key-points","title":"Extracting Key Points","text":"<pre><code>Reference: \"The MUC1 cytoplasmic domain, upon phosphorylation by Src kinases, interacts with \u03b2-catenin\"\nYour quote: \"MUC1 cytoplasmic domain ... interacts with \u03b2-catenin\"\n</code></pre>"},{"location":"concepts/editorial-conventions/#multiple-ellipses","title":"Multiple Ellipses","text":"<p>You can use multiple ellipses:</p> <pre><code>\"MUC1 ... blocks nuclear targeting ... apoptotic response\"\n</code></pre> <p>This creates three parts that must all be found.</p>"},{"location":"concepts/editorial-conventions/#order-matters","title":"Order Matters","text":"<p>The parts must appear in the reference in the same order:</p> <pre><code>Reference: \"A then B then C\"\n\n\u2705 \"A ... C\"        # Valid: A before C\n\u2705 \"A ... B ... C\"  # Valid: correct order\n\u274c \"C ... A\"        # Invalid: wrong order\n</code></pre>"},{"location":"concepts/editorial-conventions/#combining-conventions","title":"Combining Conventions","text":"<p>You can combine brackets and ellipsis:</p> <pre><code>\"MUC1 [mucin 1] oncoprotein ... c-Abl [a tyrosine kinase]\"\n</code></pre> <p>Processing order: 1. Remove brackets: <code>\"MUC1 oncoprotein ... c-Abl\"</code> 2. Split on ellipsis: <code>[\"MUC1 oncoprotein\", \"c-Abl\"]</code> 3. Normalize and match each part</p>"},{"location":"concepts/editorial-conventions/#best-practices","title":"Best Practices","text":""},{"location":"concepts/editorial-conventions/#do","title":"Do \u2705","text":"<ul> <li>Use brackets for actual editorial clarifications</li> <li>Use ellipsis only when omitting substantial text</li> <li>Keep your quotes as close to the original as practical</li> <li>Use these sparingly - direct quotes are clearer</li> </ul>"},{"location":"concepts/editorial-conventions/#dont","title":"Don't \u274c","text":"<ul> <li>Don't use brackets for emphasis or comments</li> <li>Don't use ellipsis for single word omissions</li> <li>Don't change the meaning with your insertions</li> <li>Don't nest brackets or use non-standard notation</li> </ul>"},{"location":"concepts/editorial-conventions/#examples","title":"Examples","text":"<p>Good usage:</p> <pre><code>supporting_text: BRCA1 [breast cancer 1] plays a role in DNA repair\nreference: PMID:12345678\n</code></pre> <p>Questionable usage:</p> <pre><code>supporting_text: BRCA1 [IMPORTANT!] plays a role in DNA repair  # \u274c Not editorial\nsupporting_text: BRCA1 plays a ... in DNA repair                # \u274c Unnecessary ellipsis\n</code></pre>"},{"location":"concepts/editorial-conventions/#command-line-examples","title":"Command Line Examples","text":""},{"location":"concepts/editorial-conventions/#with-brackets","title":"With Brackets","text":"<pre><code>linkml-reference-validator validate text \\\n  'MUC1 [mucin 1] oncoprotein blocks nuclear targeting' \\\n  PMID:16888623\n</code></pre> <p>Note: Use single quotes in shell to avoid bracket expansion.</p>"},{"location":"concepts/editorial-conventions/#with-ellipsis","title":"With Ellipsis","text":"<pre><code>linkml-reference-validator validate text \\\n  \"MUC1 oncoprotein ... apoptotic response\" \\\n  PMID:16888623\n</code></pre>"},{"location":"concepts/editorial-conventions/#combined","title":"Combined","text":"<pre><code>linkml-reference-validator validate text \\\n  'MUC1 [an oncoprotein] blocks ... c-Abl [a tyrosine kinase]' \\\n  PMID:16888623\n</code></pre>"},{"location":"concepts/editorial-conventions/#in-data-files","title":"In Data Files","text":"<p>Editorial conventions work the same in data files:</p> <pre><code>- gene_symbol: MUC1\n  function: oncoprotein blocking c-Abl\n  supporting_text: MUC1 [mucin 1] oncoprotein ... c-Abl\n  reference: PMID:16888623\n</code></pre>"},{"location":"concepts/editorial-conventions/#technical-details","title":"Technical Details","text":""},{"location":"concepts/editorial-conventions/#normalization-order","title":"Normalization Order","text":"<ol> <li>Remove everything inside <code>[...]</code></li> <li>Split on <code>...</code> if present</li> <li>For each part:</li> <li>Lowercase</li> <li>Remove punctuation</li> <li>Collapse whitespace</li> <li>Match normalized parts against normalized reference</li> </ol>"},{"location":"concepts/editorial-conventions/#regular-expressions","title":"Regular Expressions","text":"<p>Brackets: <code>\\[([^\\]]*)\\]</code> (removes content and brackets) Ellipsis: <code>\\.\\.\\.</code> (splits on three dots exactly)</p> <p>Note: <code>..</code> (two dots) and <code>....</code> (four dots) are NOT treated as ellipsis.</p>"},{"location":"concepts/editorial-conventions/#see-also","title":"See Also","text":"<ul> <li>How It Works - Understanding the validation process</li> <li>Tutorial 1 - Examples in practice</li> </ul>"},{"location":"concepts/how-it-works/","title":"How It Works","text":"<p>Understanding the validation process and design decisions.</p>"},{"location":"concepts/how-it-works/#overview","title":"Overview","text":"<p>linkml-reference-validator validates that quoted text (supporting text) actually appears in cited references. It uses deterministic substring matching rather than fuzzy or AI-based approaches.</p>"},{"location":"concepts/how-it-works/#the-validation-process","title":"The Validation Process","text":""},{"location":"concepts/how-it-works/#1-text-normalization","title":"1. Text Normalization","text":"<p>Before matching, both the supporting text and reference content are normalized:</p> <ul> <li>Lowercased: <code>\"MUC1\"</code> \u2192 <code>\"muc1\"</code></li> <li>Punctuation removed: <code>\"c-Abl\"</code> \u2192 <code>\"c abl\"</code></li> <li>Whitespace collapsed: Multiple spaces become single space</li> <li>Editorial notes removed: <code>\"[mucin 1]\"</code> \u2192 <code>\"\"</code></li> </ul> <p>Example:</p> <pre><code>Original: \"MUC1 [mucin 1] oncoprotein blocks c-Abl!!!\"\nNormalized: \"muc1 oncoprotein blocks c abl\"\n</code></pre> <p>This allows matching despite formatting differences while maintaining exactness.</p>"},{"location":"concepts/how-it-works/#2-substring-matching","title":"2. Substring Matching","text":"<p>After normalization, the validator checks if the supporting text appears as a substring in the reference content.</p> <p>Simple case:</p> <pre><code>supporting_text = \"MUC1 oncoprotein\"\nreference_content = \"...The MUC1 oncoprotein blocks nuclear...\"\n# Match: \"muc1 oncoprotein\" found in normalized reference\n</code></pre>"},{"location":"concepts/how-it-works/#3-ellipsis-handling","title":"3. Ellipsis Handling","text":"<p>When supporting text contains <code>...</code>, each part is matched separately:</p> <pre><code>Supporting: \"MUC1 oncoprotein ... nuclear targeting\"\nParts: [\"MUC1 oncoprotein\", \"nuclear targeting\"]\n# Both parts must exist in the reference\n</code></pre>"},{"location":"concepts/how-it-works/#why-deterministic-matching","title":"Why Deterministic Matching?","text":""},{"location":"concepts/how-it-works/#not-fuzzy-matching","title":"Not Fuzzy Matching","text":"<p>We explicitly avoid fuzzy/similarity matching because:</p> <ol> <li>Accuracy: No false positives from \"close enough\" matches</li> <li>Reproducibility: Same input always gives same result</li> <li>Explainability: Clear why something matched or didn't</li> <li>Trust: Critical for scientific accuracy</li> </ol>"},{"location":"concepts/how-it-works/#not-ai-based","title":"Not AI-Based","text":"<p>We don't use LLMs or semantic similarity because:</p> <ol> <li>Determinism: Results must be reproducible</li> <li>Verifiability: Humans can verify the match themselves</li> <li>No hallucinations: The text either exists or doesn't</li> <li>Simplicity: No model dependencies or API costs</li> </ol>"},{"location":"concepts/how-it-works/#reference-fetching","title":"Reference Fetching","text":"<p>The validator uses a plugin architecture to support multiple reference sources. Each source type is handled by a dedicated plugin that knows how to fetch and parse content from that source.</p>"},{"location":"concepts/how-it-works/#pubmed-pmid","title":"PubMed (PMID)","text":"<p>For <code>PMID:12345678</code>:</p> <ol> <li>Queries NCBI E-utilities API</li> <li>Fetches abstract and metadata</li> <li>Parses XML response</li> <li>Caches as markdown with YAML frontmatter</li> </ol>"},{"location":"concepts/how-it-works/#pubmed-central-pmc","title":"PubMed Central (PMC)","text":"<p>For <code>PMC:12345</code>:</p> <ol> <li>Queries PMC API for full-text XML</li> <li>Extracts all sections (abstract, introduction, methods, results, discussion)</li> <li>Provides more content than abstracts alone</li> <li>Also cached as markdown</li> </ol>"},{"location":"concepts/how-it-works/#doi-digital-object-identifier","title":"DOI (Digital Object Identifier)","text":"<p>For <code>DOI:10.1234/example</code>:</p> <ol> <li>Queries Crossref API</li> <li>Fetches metadata and abstract (when available)</li> <li>Caches as markdown</li> </ol>"},{"location":"concepts/how-it-works/#local-files","title":"Local Files","text":"<p>For <code>file:./path/to/document.md</code>:</p> <ol> <li>Reads file from local filesystem</li> <li>Extracts title from first markdown heading (or uses filename)</li> <li>Content used as-is (no parsing for HTML files)</li> <li>Caches to allow consistent validation</li> </ol> <p>Path resolution: - Absolute paths work directly - Relative paths use <code>reference_base_dir</code> config if set, otherwise current directory</p>"},{"location":"concepts/how-it-works/#urls","title":"URLs","text":"<p>For <code>url:https://example.com/page</code>:</p> <ol> <li>Fetches page via HTTP GET</li> <li>Extracts title from <code>&lt;title&gt;</code> tag (for HTML)</li> <li>Content preserved as-is</li> <li>Cached like other sources</li> </ol>"},{"location":"concepts/how-it-works/#caching","title":"Caching","text":"<p>References are cached in <code>references_cache/</code> as markdown files:</p> <pre><code>references_cache/\n  PMID_16888623.md\n  PMC_3458566.md\n</code></pre> <p>Cache file format:</p> <pre><code>---\nreference_id: PMID:16888623\ntitle: MUC1 oncoprotein blocks nuclear targeting...\nauthors:\n  - Raina D\n  - Ahmad R\njournal: Molecular Cell\nyear: '2006'\ndoi: 10.1016/j.molcel.2006.04.017\ncontent_type: abstract_only\n---\n\n# MUC1 oncoprotein blocks nuclear targeting...\n\n**Authors:** Raina D, Ahmad R, ...\n**Journal:** Molecular Cell (2006)\n\n## Content\n\nThe MUC1 oncoprotein blocks nuclear targeting...\n</code></pre>"},{"location":"concepts/how-it-works/#cache-benefits","title":"Cache Benefits","text":"<ul> <li>Offline usage: Work without network after initial fetch</li> <li>Performance: Instant validation after first fetch</li> <li>Reproducibility: Same reference version for all validations</li> <li>Inspection: Human-readable cache files</li> </ul>"},{"location":"concepts/how-it-works/#linkml-integration","title":"LinkML Integration","text":"<p>The validator is a LinkML plugin that uses special slot URIs:</p> <pre><code>classes:\n  Statement:\n    attributes:\n      supporting_text:\n        slot_uri: linkml:excerpt  # Marks as quoted text\n      reference:\n        slot_uri: linkml:authoritative_reference  # Marks as reference ID\n</code></pre> <p>When LinkML validates data, it calls our plugin for fields marked with these URIs.</p>"},{"location":"concepts/how-it-works/#editorial-conventions","title":"Editorial Conventions","text":""},{"location":"concepts/how-it-works/#square-brackets","title":"Square Brackets <code>[...]</code>","text":"<p>Used for editorial clarifications inserted into quotes:</p> <pre><code>Original reference: \"MUC1 oncoprotein blocks nuclear targeting\"\nYour quote: \"MUC1 [mucin 1] oncoprotein blocks nuclear targeting\"\n</code></pre> <p>The <code>[mucin 1]</code> is removed before matching.</p>"},{"location":"concepts/how-it-works/#ellipsis","title":"Ellipsis <code>...</code>","text":"<p>Used to indicate omitted text between parts:</p> <pre><code>Original: \"MUC1 oncoprotein blocks nuclear targeting of c-Abl\"\nYour quote: \"MUC1 oncoprotein ... c-Abl\"\n</code></pre> <p>Both parts must exist in the reference.</p>"},{"location":"concepts/how-it-works/#design-principles","title":"Design Principles","text":""},{"location":"concepts/how-it-works/#1-conservative-by-default","title":"1. Conservative by Default","text":"<ul> <li>Only exact substring matches count</li> <li>No approximations or suggestions</li> <li>Fail fast on mismatches</li> </ul>"},{"location":"concepts/how-it-works/#2-progressive-disclosure","title":"2. Progressive Disclosure","text":"<ul> <li>Simple cases require minimal syntax</li> <li>Advanced features (editorial notes, ellipsis) available when needed</li> <li>Sensible defaults (cache location, etc.)</li> </ul>"},{"location":"concepts/how-it-works/#3-cli-first","title":"3. CLI-First","text":"<ul> <li>Command-line is the primary interface</li> <li>Python API available for integration</li> <li>No GUI required</li> </ul>"},{"location":"concepts/how-it-works/#4-standards-based","title":"4. Standards-Based","text":"<ul> <li>Uses LinkML schemas</li> <li>NCBI standard identifiers (PMID, PMC)</li> <li>Markdown for cache files</li> </ul>"},{"location":"concepts/how-it-works/#limitations","title":"Limitations","text":""},{"location":"concepts/how-it-works/#what-this-tool-does-not-do","title":"What This Tool Does NOT Do","text":"<ul> <li>Semantic matching: Won't match paraphrases</li> <li>Citation formatting: Not a bibliography manager</li> <li>Fact checking: Only verifies text existence</li> <li>Plagiarism detection: Not designed for that purpose</li> </ul>"},{"location":"concepts/how-it-works/#known-limitations","title":"Known Limitations","text":"<ul> <li>Abstracts only for most PMIDs: Full text requires PMC</li> <li>Network required: For initial reference fetch</li> <li>English-focused: Normalization optimized for English text</li> <li>No OCR: Can't extract text from images/PDFs in papers</li> </ul>"},{"location":"concepts/how-it-works/#when-to-use-this-tool","title":"When to Use This Tool","text":""},{"location":"concepts/how-it-works/#good-use-cases","title":"Good Use Cases \u2705","text":"<ul> <li>Validating gene function claims in databases</li> <li>Checking supporting text in knowledge graphs</li> <li>Verifying quotes in scientific documentation</li> <li>Batch validation of curated annotations</li> </ul>"},{"location":"concepts/how-it-works/#not-recommended","title":"Not Recommended \u274c","text":"<ul> <li>Checking if ideas are supported (use human review)</li> <li>Finding similar papers (use search engines)</li> <li>Generating citations (use citation managers)</li> <li>Paraphrase detection (use plagiarism tools)</li> </ul>"},{"location":"how-to/add-reference-source/","title":"Adding a New Reference Source","text":"<p>The validator uses a plugin architecture that makes it easy to add support for new reference types. This guide shows how to create a custom reference source.</p>"},{"location":"how-to/add-reference-source/#overview","title":"Overview","text":"<p>Each reference source is a Python class that:</p> <ol> <li>Inherits from <code>ReferenceSource</code></li> <li>Implements <code>prefix()</code> and <code>fetch()</code> methods</li> <li>Registers itself with the <code>ReferenceSourceRegistry</code></li> </ol>"},{"location":"how-to/add-reference-source/#step-1-create-the-source-class","title":"Step 1: Create the Source Class","text":"<p>Create a new file in <code>src/linkml_reference_validator/etl/sources/</code>:</p> <pre><code># src/linkml_reference_validator/etl/sources/arxiv.py\n\"\"\"arXiv reference source.\"\"\"\n\nimport logging\nfrom typing import Optional\n\nfrom linkml_reference_validator.models import ReferenceContent, ReferenceValidationConfig\nfrom linkml_reference_validator.etl.sources.base import ReferenceSource, ReferenceSourceRegistry\n\nlogger = logging.getLogger(__name__)\n\n\n@ReferenceSourceRegistry.register\nclass ArxivSource(ReferenceSource):\n    \"\"\"Fetch references from arXiv.\"\"\"\n\n    @classmethod\n    def prefix(cls) -&gt; str:\n        \"\"\"Return the prefix this source handles.\"\"\"\n        return \"arxiv\"\n\n    def fetch(\n        self, identifier: str, config: ReferenceValidationConfig\n    ) -&gt; Optional[ReferenceContent]:\n        \"\"\"Fetch a paper from arXiv.\n\n        Args:\n            identifier: arXiv ID (e.g., '2301.07041')\n            config: Configuration for fetching\n\n        Returns:\n            ReferenceContent if successful, None otherwise\n        \"\"\"\n        # Your implementation here\n        # Fetch from arXiv API, parse response, return ReferenceContent\n        ...\n</code></pre>"},{"location":"how-to/add-reference-source/#step-2-implement-the-fetch-method","title":"Step 2: Implement the <code>fetch()</code> Method","text":"<p>The <code>fetch()</code> method should:</p> <ol> <li>Accept an identifier (without the prefix)</li> <li>Fetch content from the external source</li> <li>Return a <code>ReferenceContent</code> object or <code>None</code> on failure</li> </ol> <pre><code>def fetch(\n    self, identifier: str, config: ReferenceValidationConfig\n) -&gt; Optional[ReferenceContent]:\n    \"\"\"Fetch a paper from arXiv.\"\"\"\n    import requests\n    import time\n\n    arxiv_id = identifier.strip()\n\n    # Respect rate limiting\n    time.sleep(config.rate_limit_delay)\n\n    # Fetch from arXiv API\n    url = f\"http://export.arxiv.org/api/query?id_list={arxiv_id}\"\n    response = requests.get(url, timeout=30)\n\n    if response.status_code != 200:\n        logger.warning(f\"Failed to fetch arxiv:{arxiv_id}\")\n        return None\n\n    # Parse the response (arXiv returns Atom XML)\n    title, authors, abstract = self._parse_arxiv_response(response.text)\n\n    return ReferenceContent(\n        reference_id=f\"arxiv:{arxiv_id}\",\n        title=title,\n        content=abstract,\n        content_type=\"abstract_only\",\n        authors=authors,\n    )\n</code></pre>"},{"location":"how-to/add-reference-source/#step-3-handle-errors-gracefully","title":"Step 3: Handle Errors Gracefully","text":"<p>Since you're interfacing with external systems, wrap API calls in try/except:</p> <pre><code>def fetch(self, identifier: str, config: ReferenceValidationConfig) -&gt; Optional[ReferenceContent]:\n    try:\n        response = requests.get(url, timeout=30)\n        # ... process response\n    except Exception as e:\n        logger.warning(f\"Failed to fetch arxiv:{identifier}: {e}\")\n        return None\n</code></pre>"},{"location":"how-to/add-reference-source/#step-4-register-the-source","title":"Step 4: Register the Source","text":"<p>The <code>@ReferenceSourceRegistry.register</code> decorator automatically registers your source when the module is imported.</p> <p>Add the import to <code>src/linkml_reference_validator/etl/sources/__init__.py</code>:</p> <pre><code>from linkml_reference_validator.etl.sources.arxiv import ArxivSource\n\n__all__ = [\n    # ... existing exports\n    \"ArxivSource\",\n]\n</code></pre>"},{"location":"how-to/add-reference-source/#step-5-write-tests","title":"Step 5: Write Tests","text":"<p>Create tests in <code>tests/test_sources.py</code>:</p> <pre><code>class TestArxivSource:\n    \"\"\"Tests for ArxivSource.\"\"\"\n\n    @pytest.fixture\n    def source(self):\n        return ArxivSource()\n\n    def test_prefix(self, source):\n        assert source.prefix() == \"arxiv\"\n\n    def test_can_handle(self, source):\n        assert source.can_handle(\"arxiv:2301.07041\")\n        assert not source.can_handle(\"PMID:12345\")\n\n    @patch(\"linkml_reference_validator.etl.sources.arxiv.requests.get\")\n    def test_fetch(self, mock_get, source, config):\n        mock_response = MagicMock()\n        mock_response.status_code = 200\n        mock_response.text = \"\"\"...\"\"\"  # Mock arXiv XML\n        mock_get.return_value = mock_response\n\n        result = source.fetch(\"2301.07041\", config)\n\n        assert result is not None\n        assert result.reference_id == \"arxiv:2301.07041\"\n</code></pre>"},{"location":"how-to/add-reference-source/#optional-custom-can_handle-method","title":"Optional: Custom <code>can_handle()</code> Method","text":"<p>The default <code>can_handle()</code> checks if the reference starts with your prefix. Override it for custom matching:</p> <pre><code>@classmethod\ndef can_handle(cls, reference_id: str) -&gt; bool:\n    \"\"\"Handle arxiv: references and bare arXiv IDs.\"\"\"\n    ref = reference_id.strip()\n    # Match prefix\n    if ref.lower().startswith(\"arxiv:\"):\n        return True\n    # Match bare arXiv ID pattern (e.g., 2301.07041)\n    import re\n    return bool(re.match(r\"^\\d{4}\\.\\d{4,5}(v\\d+)?$\", ref))\n</code></pre>"},{"location":"how-to/add-reference-source/#complete-example","title":"Complete Example","text":"<p>Here's a complete implementation for a hypothetical \"WikiData\" source:</p> <pre><code># src/linkml_reference_validator/etl/sources/wikidata.py\n\"\"\"WikiData reference source.\"\"\"\n\nimport logging\nimport time\nfrom typing import Optional\n\nimport requests\n\nfrom linkml_reference_validator.models import ReferenceContent, ReferenceValidationConfig\nfrom linkml_reference_validator.etl.sources.base import ReferenceSource, ReferenceSourceRegistry\n\nlogger = logging.getLogger(__name__)\n\n\n@ReferenceSourceRegistry.register\nclass WikidataSource(ReferenceSource):\n    \"\"\"Fetch reference content from WikiData items.\"\"\"\n\n    @classmethod\n    def prefix(cls) -&gt; str:\n        return \"wikidata\"\n\n    def fetch(\n        self, identifier: str, config: ReferenceValidationConfig\n    ) -&gt; Optional[ReferenceContent]:\n        qid = identifier.strip().upper()\n        if not qid.startswith(\"Q\"):\n            qid = f\"Q{qid}\"\n\n        time.sleep(config.rate_limit_delay)\n\n        url = f\"https://www.wikidata.org/wiki/Special:EntityData/{qid}.json\"\n\n        try:\n            response = requests.get(url, timeout=30)\n            if response.status_code != 200:\n                logger.warning(f\"Failed to fetch wikidata:{qid}\")\n                return None\n\n            data = response.json()\n            entity = data[\"entities\"].get(qid, {})\n\n            # Extract label and description\n            labels = entity.get(\"labels\", {})\n            descriptions = entity.get(\"descriptions\", {})\n\n            title = labels.get(\"en\", {}).get(\"value\", qid)\n            description = descriptions.get(\"en\", {}).get(\"value\", \"\")\n\n            return ReferenceContent(\n                reference_id=f\"wikidata:{qid}\",\n                title=title,\n                content=description,\n                content_type=\"wikidata_description\",\n            )\n\n        except Exception as e:\n            logger.warning(f\"Error fetching wikidata:{qid}: {e}\")\n            return None\n</code></pre>"},{"location":"how-to/add-reference-source/#reference-referencecontent-fields","title":"Reference: ReferenceContent Fields","text":"<p>The <code>ReferenceContent</code> model has these fields:</p> Field Type Description <code>reference_id</code> <code>str</code> Full reference ID with prefix (e.g., <code>arxiv:2301.07041</code>) <code>title</code> <code>Optional[str]</code> Title of the reference <code>content</code> <code>Optional[str]</code> Main text content for validation <code>content_type</code> <code>str</code> Type indicator (e.g., <code>abstract_only</code>, <code>full_text</code>) <code>authors</code> <code>Optional[list[str]]</code> List of author names <code>journal</code> <code>Optional[str]</code> Journal/venue name <code>year</code> <code>Optional[str]</code> Publication year <code>doi</code> <code>Optional[str]</code> DOI if available"},{"location":"how-to/add-reference-source/#tips","title":"Tips","text":"<ul> <li>Rate limiting: Always respect <code>config.rate_limit_delay</code> between API calls</li> <li>Error handling: Return <code>None</code> on failures, don't raise exceptions</li> <li>Logging: Use <code>logger.warning()</code> for failures to aid debugging</li> <li>Caching: The <code>ReferenceFetcher</code> handles caching automatically - your source just needs to fetch</li> <li>Testing: Mock external API calls in tests to avoid network dependencies</li> </ul>"},{"location":"how-to/repair-validation-errors/","title":"How to Repair Validation Errors","text":"<p>This guide explains how to use the <code>repair</code> command to automatically fix or flag supporting text validation errors.</p>"},{"location":"how-to/repair-validation-errors/#overview","title":"Overview","text":"<p>After validating your data files, you may find validation errors due to:</p> <ol> <li>Minor text differences - Unicode/ASCII variations (CO2 vs CO\u2082)</li> <li>Missing ellipsis connectors - Non-contiguous text without <code>...</code> separators</li> <li>Fabricated snippets - Text that doesn't appear in the reference</li> <li>Missing abstracts - References without available content</li> </ol> <p>The <code>repair</code> command attempts to fix these issues automatically or flags them for manual review.</p>"},{"location":"how-to/repair-validation-errors/#quick-start","title":"Quick Start","text":""},{"location":"how-to/repair-validation-errors/#repair-a-single-quote","title":"Repair a Single Quote","text":"<pre><code>linkml-reference-validator repair text \"CO2 levels were measured\" PMID:12345678\n</code></pre> <p>Output:</p> <pre><code>\u2713 Repaired successfully\n  Original: CO2 levels were measured\n  Repaired: CO\u2082 levels were measured\n  Action: CHARACTER_NORMALIZATION\n  Confidence: HIGH\n</code></pre>"},{"location":"how-to/repair-validation-errors/#repair-a-data-file-dry-run","title":"Repair a Data File (Dry Run)","text":"<pre><code>linkml-reference-validator repair data disease.yaml \\\n  --schema schema.yaml \\\n  --dry-run\n</code></pre>"},{"location":"how-to/repair-validation-errors/#apply-repairs","title":"Apply Repairs","text":"<pre><code>linkml-reference-validator repair data disease.yaml \\\n  --schema schema.yaml \\\n  --no-dry-run\n</code></pre>"},{"location":"how-to/repair-validation-errors/#understanding-confidence-levels","title":"Understanding Confidence Levels","text":"<p>The repair command uses confidence thresholds to determine how to handle each error:</p> Confidence Score Range Action HIGH 0.95-1.00 Auto-fix safely MEDIUM 0.80-0.95 Suggest fix, needs review LOW 0.50-0.80 Flag for manual review VERY_LOW 0.00-0.50 Recommend removal"},{"location":"how-to/repair-validation-errors/#repair-strategies","title":"Repair Strategies","text":""},{"location":"how-to/repair-validation-errors/#1-character-normalization-high-confidence","title":"1. Character Normalization (High Confidence)","text":"<p>Fixes common Unicode/ASCII differences automatically:</p> <p>Before:</p> <pre><code>supporting_text: \"CO2 levels were measured\"\n</code></pre> <p>After:</p> <pre><code>supporting_text: \"CO\u2082 levels were measured\"\n</code></pre> <p>Common mappings: - <code>CO2</code> \u2192 <code>CO\u2082</code> - <code>H2O</code> \u2192 <code>H\u2082O</code> - <code>O2</code> \u2192 <code>O\u2082</code> - <code>+/-</code> \u2192 <code>\u00b1</code> - <code>+-</code> \u2192 <code>\u00b1</code></p>"},{"location":"how-to/repair-validation-errors/#2-ellipsis-insertion-medium-confidence","title":"2. Ellipsis Insertion (Medium Confidence)","text":"<p>When text parts exist in the reference but aren't contiguous:</p> <p>Before:</p> <pre><code>supporting_text: \"Disease X affects children. Treatment involves medication Y.\"\n</code></pre> <p>After:</p> <pre><code>supporting_text: \"Disease X affects children. ... Treatment involves medication Y.\"\n</code></pre> <p>This requires manual review because the context between parts may be important.</p>"},{"location":"how-to/repair-validation-errors/#3-fuzzy-match-correction-variable-confidence","title":"3. Fuzzy Match Correction (Variable Confidence)","text":"<p>Suggests the closest matching text from the reference:</p> <pre><code>Suggested fix (85%): \"Haemophilus influenzae type b\" \u2192 \"H. influenzae type b\"\n</code></pre> <p>Use with caution - verify the suggestion preserves the intended meaning.</p>"},{"location":"how-to/repair-validation-errors/#4-removal-recommendation-very-low-confidence","title":"4. Removal Recommendation (Very Low Confidence)","text":"<p>Flags text that appears fabricated or hallucinated:</p> <pre><code>RECOMMENDED REMOVALS:\n  PMID:34567890 at evidence[2]:\n    Similarity: 8%\n    Snippet: 'This completely made up text...'\n</code></pre> <p>Never auto-removed - always requires manual review.</p>"},{"location":"how-to/repair-validation-errors/#configuration-file","title":"Configuration File","text":"<p>Create <code>.linkml-reference-validator.yaml</code> for project-specific settings:</p> <pre><code>repair:\n  # Confidence thresholds\n  auto_fix_threshold: 0.95\n  suggest_threshold: 0.80\n  removal_threshold: 0.50\n\n  # Character mappings\n  character_mappings:\n    \"+/-\": \"\u00b1\"\n    \"CO2\": \"CO\u2082\"\n    \"H2O\": \"H\u2082O\"\n    \"O2\": \"O\u2082\"\n    \"N2\": \"N\u2082\"\n\n  # References to skip (known issues)\n  skip_references:\n    - \"PMID:12345678\"\n\n  # References trusted despite low similarity\n  trusted_low_similarity:\n    - \"PMID:98765432\"\n</code></pre> <p>Use with:</p> <pre><code>linkml-reference-validator repair data file.yaml \\\n  --schema schema.yaml \\\n  --config .linkml-reference-validator.yaml\n</code></pre>"},{"location":"how-to/repair-validation-errors/#command-reference","title":"Command Reference","text":""},{"location":"how-to/repair-validation-errors/#repair-text","title":"<code>repair text</code>","text":"<p>Repair a single supporting text quote.</p> <pre><code>linkml-reference-validator repair text &lt;TEXT&gt; &lt;REFERENCE_ID&gt; [OPTIONS]\n</code></pre> <p>Options: - <code>--cache-dir PATH</code> - Directory for caching references - <code>--verbose</code> - Show detailed output - <code>--auto-fix-threshold FLOAT</code> - Minimum similarity for auto-fixes</p> <p>Examples:</p> <pre><code># Basic repair\nlinkml-reference-validator repair text \"CO2 levels\" PMID:12345678\n\n# With verbose output\nlinkml-reference-validator repair text \"protein functions\" PMID:12345678 --verbose\n\n# Custom threshold\nlinkml-reference-validator repair text \"text\" PMID:123 --auto-fix-threshold 0.98\n</code></pre>"},{"location":"how-to/repair-validation-errors/#repair-data","title":"<code>repair data</code>","text":"<p>Repair supporting text in a data file.</p> <pre><code>linkml-reference-validator repair data &lt;DATA_FILE&gt; --schema &lt;SCHEMA&gt; [OPTIONS]\n</code></pre> <p>Options: - <code>--schema PATH</code> - Path to LinkML schema (required) - <code>--target-class CLASS</code> - Target class to validate - <code>--dry-run / --no-dry-run</code> - Show changes without applying (default: dry-run) - <code>--auto-fix-threshold FLOAT</code> - Minimum similarity for auto-fixes (default: 0.95) - <code>--output PATH</code> - Output file path (default: overwrite with backup) - <code>--config PATH</code> - Path to repair configuration file - <code>--cache-dir PATH</code> - Directory for caching references - <code>--verbose</code> - Show detailed output</p> <p>Examples:</p> <pre><code># Dry run (default)\nlinkml-reference-validator repair data disease.yaml \\\n  --schema schema.yaml\n\n# Apply fixes\nlinkml-reference-validator repair data disease.yaml \\\n  --schema schema.yaml \\\n  --no-dry-run\n\n# Output to new file\nlinkml-reference-validator repair data disease.yaml \\\n  --schema schema.yaml \\\n  --no-dry-run \\\n  --output repaired.yaml\n\n# With custom config\nlinkml-reference-validator repair data disease.yaml \\\n  --schema schema.yaml \\\n  --config .linkml-reference-validator.yaml\n</code></pre>"},{"location":"how-to/repair-validation-errors/#best-practices","title":"Best Practices","text":""},{"location":"how-to/repair-validation-errors/#1-always-start-with-dry-run","title":"1. Always Start with Dry Run","text":"<pre><code># First, see what would be changed\nlinkml-reference-validator repair data file.yaml --schema schema.yaml --dry-run\n\n# Review the report carefully, then apply\nlinkml-reference-validator repair data file.yaml --schema schema.yaml --no-dry-run\n</code></pre>"},{"location":"how-to/repair-validation-errors/#2-review-suggested-fixes","title":"2. Review Suggested Fixes","text":"<p>High-confidence fixes (character normalization) are safe to auto-apply. But always review: - Ellipsis insertions (may lose important context) - Fuzzy corrections (may change meaning)</p>"},{"location":"how-to/repair-validation-errors/#3-handle-removals-manually","title":"3. Handle Removals Manually","text":"<p>Items flagged for removal are never automatically deleted. Review each one: - Verify the text isn't actually in the reference - Check if you have the wrong PMID - Consider finding an alternative reference</p>"},{"location":"how-to/repair-validation-errors/#4-use-skip-lists-for-known-issues","title":"4. Use Skip Lists for Known Issues","text":"<p>If a reference is known to have issues (no abstract, behind paywall), add it to skip list:</p> <pre><code>repair:\n  skip_references:\n    - \"PMID:12345678\"  # No abstract available\n</code></pre>"},{"location":"how-to/repair-validation-errors/#5-trust-list-for-verified-references","title":"5. Trust List for Verified References","text":"<p>If you've manually verified a low-similarity match is correct:</p> <pre><code>repair:\n  trusted_low_similarity:\n    - \"PMID:98765432\"  # Verified manually\n</code></pre>"},{"location":"how-to/repair-validation-errors/#troubleshooting","title":"Troubleshooting","text":""},{"location":"how-to/repair-validation-errors/#no-evidence-items-found-to-repair","title":"\"No evidence items found to repair\"","text":"<p>Your data file doesn't match the expected evidence structure. Ensure your schema has: - A field named <code>supporting_text</code> or <code>snippet</code> - A field named <code>reference</code> or <code>reference_id</code></p>"},{"location":"how-to/repair-validation-errors/#flagged-for-removal-text-not-found","title":"\"Flagged for removal - text not found\"","text":"<p>The supporting text wasn't found in the reference. Possible causes: - Text is paraphrased, not quoted - Text is in figures/tables (not extracted) - Wrong PMID - AI-generated/hallucinated quote</p>"},{"location":"how-to/repair-validation-errors/#reference-content-not-available","title":"\"Reference content not available\"","text":"<p>The reference exists but has no retrievable content: - Abstract-only paper with no PMC access - Very old paper - Retracted article</p> <p>Add to skip list to ignore during repair:</p> <pre><code>repair:\n  skip_references:\n    - \"PMID:NOABSTRACT001\"\n</code></pre>"},{"location":"how-to/repair-validation-errors/#python-api","title":"Python API","text":"<p>For programmatic access:</p> <pre><code>from linkml_reference_validator.models import (\n    ReferenceValidationConfig,\n    RepairConfig,\n)\nfrom linkml_reference_validator.validation.repairer import SupportingTextRepairer\n\n# Configure\nval_config = ReferenceValidationConfig(cache_dir=\"cache\")\nrepair_config = RepairConfig(\n    auto_fix_threshold=0.95,\n    character_mappings={\"CO2\": \"CO\u2082\"},\n)\n\n# Create repairer\nrepairer = SupportingTextRepairer(val_config, repair_config)\n\n# Repair single item\nresult = repairer.repair_single(\n    supporting_text=\"CO2 levels were measured\",\n    reference_id=\"PMID:12345678\",\n)\n\nprint(f\"Repaired: {result.is_repaired}\")\nprint(f\"New text: {result.repaired_text}\")\n\n# Batch repair\nitems = [\n    (\"text1\", \"PMID:1\", \"path1\"),\n    (\"text2\", \"PMID:2\", \"path2\"),\n]\nreport = repairer.repair_batch(items)\nprint(repairer.format_report(report))\n</code></pre>"},{"location":"how-to/use-local-files-and-urls/","title":"Using Local Files and URLs as References","text":"<p>In addition to PubMed IDs and DOIs, the validator supports local files and web URLs as reference sources. This is useful when your supporting text comes from internal documentation, research notes, or web pages.</p>"},{"location":"how-to/use-local-files-and-urls/#local-file-references","title":"Local File References","text":"<p>Use the <code>file:</code> prefix to reference local files:</p> <pre><code>linkml-reference-validator validate text \\\n  \"JAK1 binds to the receptor complex\" \\\n  file:./research/jak-signaling-notes.md\n</code></pre>"},{"location":"how-to/use-local-files-and-urls/#supported-file-types","title":"Supported File Types","text":"<ul> <li>Markdown (<code>.md</code>) - Title extracted from first <code># heading</code></li> <li>Plain text (<code>.txt</code>) - Content used as-is</li> <li>HTML (<code>.html</code>) - Content preserved including HTML entities</li> </ul>"},{"location":"how-to/use-local-files-and-urls/#path-resolution","title":"Path Resolution","text":"<p>Absolute paths always work:</p> <pre><code>file:/Users/me/research/notes.md\n</code></pre> <p>Relative paths are resolved in order:</p> <ol> <li>If <code>reference_base_dir</code> is configured, paths resolve relative to it</li> <li>Otherwise, paths resolve relative to the current working directory</li> </ol>"},{"location":"how-to/use-local-files-and-urls/#configuring-a-base-directory","title":"Configuring a Base Directory","text":"<p>Set a base directory for all relative file references:</p> <pre><code>from linkml_reference_validator.models import ReferenceValidationConfig\nfrom pathlib import Path\n\nconfig = ReferenceValidationConfig(\n    reference_base_dir=Path(\"./references\"),\n)\n</code></pre> <p>Then <code>file:notes.md</code> resolves to <code>./references/notes.md</code>.</p>"},{"location":"how-to/use-local-files-and-urls/#example-validating-against-research-notes","title":"Example: Validating Against Research Notes","text":"<p>Create a research file:</p> <pre><code># JAK-STAT Signaling Pathway\n\nJAK1 binds to the receptor complex and initiates downstream signaling.\nThis leads to STAT phosphorylation and nuclear translocation.\n</code></pre> <p>Validate:</p> <pre><code>linkml-reference-validator validate text \\\n  \"JAK1 binds to the receptor complex\" \\\n  file:./jak-signaling.md\n</code></pre>"},{"location":"how-to/use-local-files-and-urls/#url-references","title":"URL References","text":"<p>Use the <code>url:</code> prefix to reference web pages:</p> <pre><code>linkml-reference-validator validate text \\\n  \"Climate change affects biodiversity\" \\\n  url:https://example.org/climate-report.html\n</code></pre>"},{"location":"how-to/use-local-files-and-urls/#caching","title":"Caching","text":"<p>URLs are cached the same way as PMID and DOI references:</p> <ul> <li>First fetch downloads and caches the content</li> <li>Subsequent validations use the cached version</li> <li>Use <code>--force-refresh</code> to re-fetch</li> </ul>"},{"location":"how-to/use-local-files-and-urls/#title-extraction","title":"Title Extraction","text":"<p>For HTML pages, the title is extracted from the <code>&lt;title&gt;</code> tag. For other content types, the URL itself is used as the title.</p>"},{"location":"how-to/use-local-files-and-urls/#example-validating-against-a-web-page","title":"Example: Validating Against a Web Page","text":"<pre><code># First validation fetches and caches\nlinkml-reference-validator validate text \\\n  \"The quick brown fox jumps over the lazy dog\" \\\n  url:https://example.com/pangram-examples.html\n\n# Subsequent validations use cache\nlinkml-reference-validator validate text \\\n  \"A quick brown fox\" \\\n  url:https://example.com/pangram-examples.html\n</code></pre>"},{"location":"how-to/use-local-files-and-urls/#using-in-data-files","title":"Using in Data Files","text":"<p>Both file and URL references work in LinkML data files:</p> <pre><code># data.yaml\n- id: local-evidence\n  supporting_text: JAK1 binds to the receptor complex\n  reference: file:./research/jak-notes.md\n\n- id: web-evidence\n  supporting_text: Climate impacts are accelerating\n  reference: url:https://example.org/climate-report.html\n</code></pre>"},{"location":"how-to/use-local-files-and-urls/#reference-type-summary","title":"Reference Type Summary","text":"Prefix Example Source <code>PMID:</code> <code>PMID:16888623</code> PubMed via NCBI Entrez <code>DOI:</code> <code>DOI:10.1038/nature12373</code> Crossref API <code>file:</code> <code>file:./notes.md</code> Local filesystem <code>url:</code> <code>url:https://example.com</code> Web (HTTP/HTTPS)"},{"location":"how-to/use-local-files-and-urls/#best-practices","title":"Best Practices","text":""},{"location":"how-to/use-local-files-and-urls/#for-local-files","title":"For Local Files","text":"<ul> <li>Keep reference files in a dedicated directory</li> <li>Use <code>reference_base_dir</code> for consistent path resolution</li> <li>Use markdown for structured content with clear headings</li> </ul>"},{"location":"how-to/use-local-files-and-urls/#for-urls","title":"For URLs","text":"<ul> <li>Prefer stable URLs (avoid query parameters that change)</li> <li>Be aware that web content may change (cache helps with reproducibility)</li> <li>Consider downloading important pages as local files for long-term stability</li> </ul>"},{"location":"how-to/use-local-files-and-urls/#limitations","title":"Limitations","text":"<ul> <li>PDF files: Not yet supported (planned for future)</li> <li>Authentication: URLs requiring login are not supported</li> <li>Dynamic content: JavaScript-rendered pages may not work</li> </ul>"},{"location":"how-to/validate-dois/","title":"Validating Text Against DOIs","text":"<p>This guide shows how to validate supporting text against publications using Digital Object Identifiers (DOIs).</p>"},{"location":"how-to/validate-dois/#overview","title":"Overview","text":"<p>DOIs are persistent identifiers for digital objects, commonly used for journal articles. The validator fetches publication metadata from the Crossref API when you provide a DOI reference.</p>"},{"location":"how-to/validate-dois/#basic-usage","title":"Basic Usage","text":""},{"location":"how-to/validate-dois/#validate-a-single-quote","title":"Validate a Single Quote","text":"<pre><code>linkml-reference-validator validate text \\\n  \"Nanometre-scale thermometry\" \\\n  DOI:10.1038/nature12373\n</code></pre> <p>Output:</p> <pre><code>Validating text against DOI:10.1038/nature12373...\n  Text: Nanometre-scale thermometry\n\nResult:\n  Valid: True\n  Message: Supporting text validated successfully in DOI:10.1038/nature12373\n</code></pre>"},{"location":"how-to/validate-dois/#doi-format","title":"DOI Format","text":"<p>DOIs should be prefixed with <code>DOI:</code>:</p> <pre><code>DOI:10.1038/nature12373\nDOI:10.1126/science.1234567\nDOI:10.1016/j.cell.2023.01.001\n</code></pre> <p>The DOI itself follows the standard format: <code>10.prefix/suffix</code></p>"},{"location":"how-to/validate-dois/#pre-caching-dois","title":"Pre-caching DOIs","text":"<p>For offline validation or to speed up repeated validations:</p> <pre><code>linkml-reference-validator cache reference DOI:10.1038/nature12373\n</code></pre> <p>Output:</p> <pre><code>Fetching DOI:10.1038/nature12373...\nSuccessfully cached DOI:10.1038/nature12373\n  Title: Nanometre-scale thermometry in a living cell\n  Authors: G. Kucsko, P. C. Maurer, N. Y. Yao\n  Content type: abstract_only\n  Content length: 1234 characters\n</code></pre> <p>Cached references are stored in <code>references_cache/</code> as markdown files with YAML frontmatter.</p>"},{"location":"how-to/validate-dois/#using-dois-in-data-files","title":"Using DOIs in Data Files","text":"<p>DOIs work the same as PMIDs in LinkML data files:</p> <p>schema.yaml:</p> <pre><code>id: https://example.org/my-schema\nname: my-schema\n\nprefixes:\n  linkml: https://w3id.org/linkml/\n\nclasses:\n  Statement:\n    attributes:\n      id:\n        identifier: true\n      supporting_text:\n        slot_uri: linkml:excerpt\n      reference:\n        slot_uri: linkml:authoritative_reference\n</code></pre> <p>data.yaml:</p> <pre><code>- id: stmt1\n  supporting_text: Nanometre-scale thermometry\n  reference: DOI:10.1038/nature12373\n- id: stmt2\n  supporting_text: MUC1 oncoprotein blocks nuclear targeting\n  reference: PMID:16888623\n</code></pre> <p>Validate:</p> <pre><code>linkml-reference-validator validate data \\\n  data.yaml \\\n  --schema schema.yaml \\\n  --target-class Statement\n</code></pre> <p>You can mix DOIs and PMIDs in the same data file.</p>"},{"location":"how-to/validate-dois/#repairing-doi-references","title":"Repairing DOI References","text":"<p>The repair command also works with DOIs:</p> <pre><code>linkml-reference-validator repair text \\\n  \"Nanometre scale thermometry\" \\\n  DOI:10.1038/nature12373\n</code></pre>"},{"location":"how-to/validate-dois/#doi-vs-pmid-when-to-use-each","title":"DOI vs PMID: When to Use Each","text":"Feature PMID DOI Source NCBI PubMed Crossref Coverage Biomedical literature All scholarly content Full text Via PMC when available Metadata only Abstract Usually available Depends on publisher <p>Use PMID when: - Working with biomedical/life science literature - Full text access is important - The article is indexed in PubMed</p> <p>Use DOI when: - The article is not in PubMed - Working with non-biomedical journals - The DOI is more readily available</p>"},{"location":"how-to/validate-dois/#content-availability","title":"Content Availability","text":"<p>Unlike PMIDs which often provide abstracts, DOI metadata from Crossref may have limited content:</p> <ul> <li>Title: Always available</li> <li>Authors: Usually available</li> <li>Abstract: Depends on publisher policy</li> <li>Full text: Not available via Crossref</li> </ul> <p>If the abstract is not available, validation will be limited to matching against the title and other metadata.</p>"},{"location":"how-to/validate-dois/#troubleshooting","title":"Troubleshooting","text":""},{"location":"how-to/validate-dois/#content-type-unavailable","title":"\"Content type: unavailable\"","text":"<p>This means Crossref returned metadata but no abstract. The DOI was fetched successfully, but validation may fail if your text doesn't match the title.</p> <p>Solution: Consider using the PMID if the article is in PubMed.</p>"},{"location":"how-to/validate-dois/#failed-to-fetch-doi","title":"\"Failed to fetch DOI\"","text":"<p>The DOI may be invalid or the Crossref API may be temporarily unavailable.</p> <p>Check: 1. Verify the DOI format (should be <code>10.prefix/suffix</code>) 2. Test the DOI at https://doi.org/YOUR_DOI 3. Try again later if Crossref is rate-limiting</p>"},{"location":"how-to/validate-dois/#rate-limiting","title":"Rate Limiting","text":"<p>The validator automatically respects Crossref rate limits. For bulk operations, consider:</p> <ol> <li>Pre-caching references before validation</li> <li>Using a polite pool (add your email in config for higher limits)</li> </ol>"},{"location":"how-to/validate-dois/#see-also","title":"See Also","text":"<ul> <li>Quickstart - Getting started with validation</li> <li>CLI Reference - Complete command documentation</li> <li>Validating OBO Files - Working with ontology files</li> </ul>"},{"location":"how-to/validate-obo-files/","title":"Validating OBO Format Files","text":"<p>This guide shows how to validate supporting text in OBO format ontology files using the <code>validate text-file</code> command.</p>"},{"location":"how-to/validate-obo-files/#overview","title":"Overview","text":"<p>OBO format ontologies may include axiom annotations that contain supporting text from publications. For example:</p> <pre><code>[Term]\nid: GO:0043263\nname: cellulosome\ndef: \"An extracellular multi-enzyme complex...\" [PMID:11601609] {ex:supporting_text=\"a unique extracellular multi-enzyme complex, called cellulosome[PMID:11601609]\"}\n</code></pre> <p>The <code>validate text-file</code> command can extract these supporting text annotations using regular expressions and validate them against the referenced publications.</p>"},{"location":"how-to/validate-obo-files/#basic-usage","title":"Basic Usage","text":""},{"location":"how-to/validate-obo-files/#command-structure","title":"Command Structure","text":"<pre><code>linkml-reference-validator validate text-file &lt;file-path&gt; \\\n  --regex &lt;pattern&gt; \\\n  [--text-group &lt;number&gt;] \\\n  [--ref-group &lt;number&gt;] \\\n  [--summary]\n</code></pre>"},{"location":"how-to/validate-obo-files/#example-validating-obo-axiom-annotations","title":"Example: Validating OBO Axiom Annotations","text":"<p>For OBO files with <code>ex:supporting_text</code> annotations:</p> <pre><code>linkml-reference-validator validate text-file my_ontology.obo \\\n  --regex 'ex:supporting_text=\"([^\"]*)\\[(\\S+:\\S+)\\]\"' \\\n  --text-group 1 \\\n  --ref-group 2\n</code></pre> <p>Explanation: - <code>--regex</code>: Regular expression pattern with two capture groups   - Group 1: <code>([^\"]*)</code> - captures the supporting text (everything before <code>[</code>)   - Group 2: <code>(\\S+:\\S+)</code> - captures the reference ID (e.g., <code>PMID:11601609</code>) - <code>--text-group 1</code>: First capture group contains the supporting text - <code>--ref-group 2</code>: Second capture group contains the reference ID</p>"},{"location":"how-to/validate-obo-files/#example-output","title":"Example Output","text":"<pre><code>Extracting text from my_ontology.obo\n  Regex pattern: ex:supporting_text=\"([^\"]*)\\[(\\S+:\\S+)\\]\"\n  Text group: 1, Reference group: 2\n  Cache directory: references_cache\n\nFound 15 match(es) to validate\n\nLine 8: def: \"...\" [PMID:11601609] {ex:supporting_text=\"a unique extracel...\n  \u2713 VALID: Supporting text validated successfully\n\nLine 23: def: \"...\" [PMID:23456789] {ex:supporting_text=\"protein complex fo...\n  \u2717 INVALID: Supporting text not found in reference\n\n============================================================\nValidation Summary:\n  Total validations: 15\n  Valid: 13\n  Invalid: 2\n  Errors: 2\n\n\u2717 Some validations failed\n</code></pre>"},{"location":"how-to/validate-obo-files/#advanced-usage","title":"Advanced Usage","text":""},{"location":"how-to/validate-obo-files/#summary-mode","title":"Summary Mode","text":"<p>To see only the summary statistics without individual line results:</p> <pre><code>linkml-reference-validator validate text-file my_ontology.obo \\\n  --regex 'ex:supporting_text=\"([^\"]*)\\[(\\S+:\\S+)\\]\"' \\\n  --summary\n</code></pre>"},{"location":"how-to/validate-obo-files/#verbose-mode","title":"Verbose Mode","text":"<p>To see detailed matching information:</p> <pre><code>linkml-reference-validator validate text-file my_ontology.obo \\\n  --regex 'ex:supporting_text=\"([^\"]*)\\[(\\S+:\\S+)\\]\"' \\\n  --verbose\n</code></pre>"},{"location":"how-to/validate-obo-files/#custom-cache-directory","title":"Custom Cache Directory","text":"<p>To use a specific cache directory for downloaded references:</p> <pre><code>linkml-reference-validator validate text-file my_ontology.obo \\\n  --regex 'ex:supporting_text=\"([^\"]*)\\[(\\S+:\\S+)\\]\"' \\\n  --cache-dir /path/to/cache\n</code></pre>"},{"location":"how-to/validate-obo-files/#regex-pattern-guide","title":"Regex Pattern Guide","text":"<p>The regex pattern must have at least two capture groups: 1. One for the supporting text 2. One for the reference ID</p>"},{"location":"how-to/validate-obo-files/#common-patterns","title":"Common Patterns","text":"<p>OBO axiom annotations:</p> <pre><code>ex:supporting_text=\"([^\"]*)\\[(\\S+:\\S+)\\]\"\n</code></pre> <p>Different annotation property:</p> <pre><code>my_prop:text=\"([^\"]*)\" my_prop:ref=(\\S+)\n</code></pre> <p>Custom format:</p> <pre><code>evidence\\{text:([^,]+),ref:([^}]+)\\}\n</code></pre>"},{"location":"how-to/validate-obo-files/#capture-group-specification","title":"Capture Group Specification","text":"<p>By default: - <code>--text-group 1</code> (first capture group is supporting text) - <code>--ref-group 2</code> (second capture group is reference ID)</p> <p>You can change these if your pattern has groups in a different order:</p> <pre><code># If reference comes before text in your pattern\nlinkml-reference-validator validate text-file file.obo \\\n  --regex 'ref=(\\S+) text=\"([^\"]+)\"' \\\n  --text-group 2 \\\n  --ref-group 1\n</code></pre>"},{"location":"how-to/validate-obo-files/#understanding-results","title":"Understanding Results","text":""},{"location":"how-to/validate-obo-files/#valid-results","title":"Valid Results (\u2713)","text":"<p>The supporting text was found in the reference content (abstract or full text) using substring matching.</p>"},{"location":"how-to/validate-obo-files/#invalid-results","title":"Invalid Results (\u2717)","text":"<p>The supporting text was not found. This could mean: - The text is a hallucination or paraphrase - The text uses different wording than the source - The reference ID is incorrect - The full text is not available (only abstract was checked)</p>"},{"location":"how-to/validate-obo-files/#editorial-conventions","title":"Editorial Conventions","text":"<p>The validator supports editorial conventions: - <code>[...]</code> - Editorial insertions (ignored during matching) - <code>...</code> - Omitted text (matches any text)</p> <p>Example:</p> <pre><code>Supporting text: \"protein [X] functions ... in cells\"\nMatches: \"protein ABC functions in regulation of cell growth in cells\"\n</code></pre>"},{"location":"how-to/validate-obo-files/#best-practices","title":"Best Practices","text":"<ol> <li>Start with a small test file to verify your regex pattern works correctly</li> <li>Use verbose mode initially to understand what's being matched</li> <li>Cache references locally to avoid repeated API calls during development</li> <li>Check the extraction first - if no matches are found, your regex may be incorrect</li> <li>Be specific with your regex to avoid false matches</li> </ol>"},{"location":"how-to/validate-obo-files/#troubleshooting","title":"Troubleshooting","text":""},{"location":"how-to/validate-obo-files/#no-matches-found","title":"No matches found","text":"<ul> <li>Verify your regex pattern matches the actual file format</li> <li>Use a regex tester to check your pattern against sample lines</li> <li>Check that capture groups are correctly numbered</li> </ul>"},{"location":"how-to/validate-obo-files/#all-validations-fail","title":"All validations fail","text":"<ul> <li>Check that reference IDs are correct (e.g., <code>PMID:12345</code>)</li> <li>Verify supporting text is actually from the reference</li> <li>Use <code>--verbose</code> to see what text is being searched</li> </ul>"},{"location":"how-to/validate-obo-files/#rate-limiting","title":"Rate limiting","text":"<ul> <li>Use <code>--cache-dir</code> to cache downloaded references</li> <li>The validator respects rate limits automatically (0.5s delay between requests)</li> </ul>"},{"location":"how-to/validate-obo-files/#see-also","title":"See Also","text":"<ul> <li>How It Works - Understanding the validation process</li> <li>Editorial Conventions - Supported text patterns</li> <li>CLI Reference - Complete CLI documentation</li> </ul>"},{"location":"how-to/validate-urls/","title":"Validating URL References","text":"<p>This guide explains how to validate references that use URLs instead of traditional identifiers like PMIDs or DOIs.</p>"},{"location":"how-to/validate-urls/#overview","title":"Overview","text":"<p>The linkml-reference-validator supports validating references that point to web content, such as:</p> <ul> <li>Book chapters hosted online</li> <li>Educational resources</li> <li>Documentation pages</li> <li>Blog posts or articles</li> <li>Any static web content</li> </ul> <p>When a reference field contains a URL, the validator:</p> <ol> <li>Fetches the web page content</li> <li>Extracts the page title from <code>&lt;title&gt;</code> tag (for HTML)</li> <li>Caches the content for future validations</li> <li>Validates your supporting text against the page content</li> </ol>"},{"location":"how-to/validate-urls/#url-format","title":"URL Format","text":"<p>Use the <code>url:</code> prefix to specify URL references:</p> <pre><code>my_field:\n  value: \"Some text from the web page...\"\n  references:\n    - \"url:https://example.com/book/chapter1\"\n</code></pre> <p>Or via CLI:</p> <pre><code>linkml-reference-validator validate text \\\n  \"Some text from the web page\" \\\n  url:https://example.com/book/chapter1\n</code></pre>"},{"location":"how-to/validate-urls/#example","title":"Example","text":"<p>Suppose you have an online textbook chapter at <code>https://example.com/biology/cell-structure</code> with the following content:</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Chapter 3: Cell Structure and Function&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Cell Structure and Function&lt;/h1&gt;\n    &lt;p&gt;The cell is the basic structural and functional unit of all living organisms.&lt;/p&gt;\n    &lt;p&gt;Cells contain various organelles that perform specific functions...&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>You can validate text extracted from this chapter:</p> <pre><code>linkml-reference-validator validate text \\\n  \"The cell is the basic structural and functional unit of all living organisms\" \\\n  url:https://example.com/biology/cell-structure\n</code></pre>"},{"location":"how-to/validate-urls/#how-url-validation-works","title":"How URL Validation Works","text":""},{"location":"how-to/validate-urls/#1-content-fetching","title":"1. Content Fetching","text":"<p>When the validator encounters a URL reference, it:</p> <ul> <li>Makes an HTTP GET request to fetch the page</li> <li>Uses a polite user agent header identifying the tool</li> <li>Respects rate limiting (configurable via <code>rate_limit_delay</code>)</li> <li>Handles timeouts (default 30 seconds)</li> </ul>"},{"location":"how-to/validate-urls/#2-content-storage","title":"2. Content Storage","text":"<p>The fetcher stores:</p> <ul> <li>Title: Extracted from the <code>&lt;title&gt;</code> tag (for HTML pages)</li> <li>Content: The raw page content as received</li> <li>Content type: Marked as <code>url</code> to distinguish from other reference types</li> </ul> <p>Note: Unlike some tools, the validator stores the raw page content without HTML-to-text conversion. This preserves the original content, though HTML tags will be present in the cached file.</p>"},{"location":"how-to/validate-urls/#3-caching","title":"3. Caching","text":"<p>Fetched URL content is cached to disk in markdown format with YAML frontmatter:</p> <pre><code>---\nreference_id: url:https://example.com/biology/cell-structure\ntitle: \"Chapter 3: Cell Structure and Function\"\ncontent_type: url\n---\n\n# Chapter 3: Cell Structure and Function\n\n## Content\n\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Chapter 3: Cell Structure and Function&lt;/title&gt;\n  &lt;/head&gt;\n  ...\n</code></pre> <p>Cache files are stored in the configured cache directory (default: <code>references_cache/</code>).</p>"},{"location":"how-to/validate-urls/#configuration","title":"Configuration","text":"<p>URL fetching behavior can be configured:</p> <pre><code># config.yaml\nrate_limit_delay: 0.5  # Wait 0.5 seconds between requests\nemail: \"your-email@example.com\"  # Used in user agent\ncache_dir: \".cache/references\"  # Where to cache fetched content\n</code></pre> <p>Or via command-line:</p> <pre><code>linkml-reference-validator validate \\\n  --cache-dir .cache \\\n  --rate-limit-delay 0.5 \\\n  my-data.yaml\n</code></pre>"},{"location":"how-to/validate-urls/#limitations","title":"Limitations","text":""},{"location":"how-to/validate-urls/#static-content-only","title":"Static Content Only","text":"<p>URL validation is designed for static web pages. It may not work well with:</p> <ul> <li>Dynamic content loaded via JavaScript</li> <li>Pages requiring authentication</li> <li>Content behind paywalls</li> <li>Frequently changing content</li> </ul>"},{"location":"how-to/validate-urls/#raw-content","title":"Raw Content","text":"<p>The validator stores raw page content. For HTML pages:</p> <ul> <li>HTML tags are preserved in the cache</li> <li>The text normalization during validation handles most cases</li> <li>Complex HTML layouts may require careful text extraction</li> </ul>"},{"location":"how-to/validate-urls/#no-rendering","title":"No Rendering","text":"<p>The fetcher downloads raw HTML and parses it directly. It does not:</p> <ul> <li>Execute JavaScript</li> <li>Render the page in a browser</li> <li>Handle dynamic content</li> </ul>"},{"location":"how-to/validate-urls/#best-practices","title":"Best Practices","text":""},{"location":"how-to/validate-urls/#1-use-stable-urls","title":"1. Use Stable URLs","text":"<p>Choose URLs that are unlikely to change:</p> <ul> <li>Versioned documentation: <code>https://docs.example.com/v1.0/chapter1</code></li> <li>Archived content: <code>https://archive.example.com/2024/article</code></li> <li>Avoid URLs with session parameters</li> </ul>"},{"location":"how-to/validate-urls/#2-verify-content-quality","title":"2. Verify Content Quality","text":"<p>After adding a URL reference, verify the extracted content:</p> <pre><code># Check what was extracted\ncat references_cache/url_https___example.com_page.md\n</code></pre> <p>Ensure the cached content contains the text you're referencing.</p>"},{"location":"how-to/validate-urls/#3-cache-management","title":"3. Cache Management","text":"<ul> <li>Commit cache files to version control for reproducibility</li> <li>Use <code>--force-refresh</code> to update cached content when pages change</li> <li>Periodically review cached URLs to ensure they're still accessible</li> </ul>"},{"location":"how-to/validate-urls/#4-mix-reference-types","title":"4. Mix Reference Types","text":"<p>URL references work alongside PMIDs and DOIs:</p> <pre><code>findings:\n  value: \"Multiple studies confirm this relationship\"\n  references:\n    - \"PMID:12345678\"  # Research paper\n    - \"DOI:10.1234/journal.article\"  # Another paper\n    - \"url:https://example.com/textbook/chapter5\"  # Textbook chapter\n</code></pre>"},{"location":"how-to/validate-urls/#troubleshooting","title":"Troubleshooting","text":""},{"location":"how-to/validate-urls/#url-not-fetching","title":"URL Not Fetching","text":"<p>If URL content isn't being fetched:</p> <ol> <li>Check network connectivity</li> <li>Verify the URL is accessible in a browser</li> <li>Check for rate limiting or IP blocks</li> <li>Look for error messages in the logs</li> </ol>"},{"location":"how-to/validate-urls/#validation-failing","title":"Validation Failing","text":"<p>If validation fails for URL references:</p> <ol> <li>Check the cached content to see what was extracted</li> <li>Verify your supporting text actually appears on the page</li> <li>Check for whitespace or formatting differences</li> <li>Consider if the page content has changed since caching</li> </ol>"},{"location":"how-to/validate-urls/#force-refresh","title":"Force Refresh","text":"<p>To re-fetch content for a URL that may have changed:</p> <pre><code>linkml-reference-validator validate text \\\n  \"Updated content\" \\\n  url:https://example.com/page \\\n  --force-refresh\n</code></pre>"},{"location":"how-to/validate-urls/#comparison-with-other-reference-types","title":"Comparison with Other Reference Types","text":"Feature PMID DOI URL file Source PubMed Crossref Any web page Local filesystem Content Type Abstract + Full Text Abstract Raw HTML/text Raw file content Metadata Rich (authors, journal, etc.) Rich Minimal (title only) Minimal (title from heading) Stability High High Variable High (local control) Access Free for abstracts Varies Varies Always available Caching Yes Yes Yes Yes"},{"location":"how-to/validate-urls/#see-also","title":"See Also","text":"<ul> <li>Using Local Files and URLs - Quick reference for file and URL sources</li> <li>Validating DOIs - For journal articles with DOIs</li> <li>Validating OBO Files - For ontology-specific validation</li> <li>How It Works - Core validation concepts</li> <li>CLI Reference - Command-line options</li> </ul>"},{"location":"reference/cli/","title":"CLI Reference","text":"<p>Complete command-line interface documentation.</p>"},{"location":"reference/cli/#main-command","title":"Main Command","text":"<pre><code>linkml-reference-validator [OPTIONS] COMMAND [ARGS]...\n</code></pre>"},{"location":"reference/cli/#options","title":"Options","text":"<ul> <li><code>--help</code> - Show help message and exit</li> </ul>"},{"location":"reference/cli/#commands","title":"Commands","text":"<ul> <li><code>validate</code> - Validate supporting text against references</li> <li><code>repair</code> - Repair supporting text validation errors</li> <li><code>cache</code> - Manage reference cache</li> </ul>"},{"location":"reference/cli/#validate","title":"validate","text":"<p>Validate supporting text against references.</p> <pre><code>linkml-reference-validator validate COMMAND [ARGS]...\n</code></pre>"},{"location":"reference/cli/#subcommands","title":"Subcommands","text":"<ul> <li><code>text</code> - Validate a single text quote</li> <li><code>data</code> - Validate supporting text in data files</li> </ul>"},{"location":"reference/cli/#validate-text","title":"validate text","text":"<p>Validate a single supporting text quote against a reference.</p>"},{"location":"reference/cli/#usage","title":"Usage","text":"<pre><code>linkml-reference-validator validate text [OPTIONS] TEXT REFERENCE_ID\n</code></pre>"},{"location":"reference/cli/#arguments","title":"Arguments","text":"<ul> <li>TEXT (required) - The supporting text to validate</li> <li>REFERENCE_ID (required) - Reference ID (e.g., PMID:12345678 or DOI:10.1234/example)</li> </ul>"},{"location":"reference/cli/#options_1","title":"Options","text":"<ul> <li><code>--cache-dir PATH</code> - Directory for caching references (default: <code>references_cache</code>)</li> <li><code>--verbose, -v</code> - Verbose output with detailed logging</li> <li><code>--help</code> - Show help message</li> </ul>"},{"location":"reference/cli/#examples","title":"Examples","text":"<p>Basic validation:</p> <pre><code>linkml-reference-validator validate text \\\n  \"MUC1 oncoprotein blocks nuclear targeting\" \\\n  PMID:16888623\n</code></pre> <p>With custom cache directory:</p> <pre><code>linkml-reference-validator validate text \\\n  \"MUC1 oncoprotein blocks nuclear targeting\" \\\n  PMID:16888623 \\\n  --cache-dir /path/to/cache\n</code></pre> <p>With verbose output:</p> <pre><code>linkml-reference-validator validate text \\\n  \"MUC1 oncoprotein blocks nuclear targeting\" \\\n  PMID:16888623 \\\n  --verbose\n</code></pre> <p>With editorial notes:</p> <pre><code>linkml-reference-validator validate text \\\n  'MUC1 [mucin 1] oncoprotein blocks nuclear targeting' \\\n  PMID:16888623\n</code></pre> <p>With ellipsis:</p> <pre><code>linkml-reference-validator validate text \\\n  \"MUC1 oncoprotein ... nuclear targeting\" \\\n  PMID:16888623\n</code></pre> <p>With DOI:</p> <pre><code>linkml-reference-validator validate text \\\n  \"Nanometre-scale thermometry\" \\\n  DOI:10.1038/nature12373\n</code></pre>"},{"location":"reference/cli/#exit-codes","title":"Exit Codes","text":"<ul> <li><code>0</code> - Validation successful</li> <li><code>1</code> - Validation failed</li> </ul>"},{"location":"reference/cli/#output-format","title":"Output Format","text":"<pre><code>Validating text against PMID:16888623...\n  Text: MUC1 oncoprotein blocks nuclear targeting\n\nResult:\n  Valid: True\n  Message: Supporting text validated successfully in PMID:16888623\n  Matched text: MUC1 oncoprotein blocks nuclear targeting...\n</code></pre>"},{"location":"reference/cli/#validate-data","title":"validate data","text":"<p>Validate supporting text in data files against their cited references.</p>"},{"location":"reference/cli/#usage_1","title":"Usage","text":"<pre><code>linkml-reference-validator validate data [OPTIONS] DATA_FILE\n</code></pre>"},{"location":"reference/cli/#arguments_1","title":"Arguments","text":"<ul> <li>DATA_FILE (required) - Path to data file (YAML/JSON)</li> </ul>"},{"location":"reference/cli/#options_2","title":"Options","text":"<ul> <li><code>--schema PATH, -s PATH</code> (required) - Path to LinkML schema file</li> <li><code>--target-class TEXT, -t TEXT</code> - Target class to validate (optional)</li> <li><code>--cache-dir PATH, -c PATH</code> - Directory for caching references (default: <code>references_cache</code>)</li> <li><code>--verbose, -v</code> - Verbose output with detailed logging</li> <li><code>--help</code> - Show help message</li> </ul>"},{"location":"reference/cli/#examples_1","title":"Examples","text":"<p>Basic validation:</p> <pre><code>linkml-reference-validator validate data \\\n  data.yaml \\\n  --schema schema.yaml\n</code></pre> <p>With target class:</p> <pre><code>linkml-reference-validator validate data \\\n  data.yaml \\\n  --schema schema.yaml \\\n  --target-class Statement\n</code></pre> <p>With custom cache:</p> <pre><code>linkml-reference-validator validate data \\\n  data.yaml \\\n  --schema schema.yaml \\\n  --cache-dir /path/to/cache\n</code></pre> <p>With verbose output:</p> <pre><code>linkml-reference-validator validate data \\\n  data.yaml \\\n  --schema schema.yaml \\\n  --verbose\n</code></pre>"},{"location":"reference/cli/#exit-codes_1","title":"Exit Codes","text":"<ul> <li><code>0</code> - All validations passed</li> <li><code>1</code> - One or more validations failed</li> </ul>"},{"location":"reference/cli/#output-format_1","title":"Output Format","text":"<p>Success:</p> <pre><code>Validating data.yaml against schema schema.yaml\nCache directory: references_cache\n\nValidation Summary:\n  Total checks: 3\n  All validations passed!\n</code></pre> <p>Failure:</p> <pre><code>Validating data.yaml against schema schema.yaml\nCache directory: references_cache\n\nValidation Issues (2):\n  [ERROR] Text part not found as substring: 'MUC1 activates JAK-STAT'\n    Location: Statement\n\nValidation Summary:\n  Total checks: 3\n  Issues found: 2\n</code></pre>"},{"location":"reference/cli/#repair","title":"repair","text":"<p>Repair supporting text validation errors.</p> <pre><code>linkml-reference-validator repair COMMAND [ARGS]...\n</code></pre>"},{"location":"reference/cli/#subcommands_1","title":"Subcommands","text":"<ul> <li><code>text</code> - Repair a single text quote</li> <li><code>data</code> - Repair supporting text in data files</li> </ul>"},{"location":"reference/cli/#repair-text","title":"repair text","text":"<p>Attempt to repair a single supporting text quote.</p>"},{"location":"reference/cli/#usage_2","title":"Usage","text":"<pre><code>linkml-reference-validator repair text [OPTIONS] TEXT REFERENCE_ID\n</code></pre>"},{"location":"reference/cli/#arguments_2","title":"Arguments","text":"<ul> <li>TEXT (required) - The supporting text to repair</li> <li>REFERENCE_ID (required) - Reference ID (e.g., PMID:12345678 or DOI:10.1234/example)</li> </ul>"},{"location":"reference/cli/#options_3","title":"Options","text":"<ul> <li><code>--cache-dir PATH, -c PATH</code> - Directory for caching references</li> <li><code>--verbose, -v</code> - Verbose output with detailed logging</li> <li><code>--auto-fix-threshold FLOAT, -a FLOAT</code> - Minimum similarity for auto-fixes (default: 0.95)</li> <li><code>--help</code> - Show help message</li> </ul>"},{"location":"reference/cli/#examples_2","title":"Examples","text":"<p>Repair character normalization:</p> <pre><code>linkml-reference-validator repair text \\\n  \"CO2 levels were measured\" \\\n  PMID:12345678\n</code></pre> <p>With verbose output:</p> <pre><code>linkml-reference-validator repair text \\\n  \"protein functions in cells\" \\\n  PMID:12345678 \\\n  --verbose\n</code></pre>"},{"location":"reference/cli/#exit-codes_2","title":"Exit Codes","text":"<ul> <li><code>0</code> - Repair successful or already valid</li> <li><code>1</code> - Could not repair</li> </ul>"},{"location":"reference/cli/#output-format_2","title":"Output Format","text":"<p>Successful repair:</p> <pre><code>Attempting repair for PMID:12345678...\n  Text: CO2 levels were measured\n\nResult:\n  \u2713 Repaired successfully\n    Original: CO2 levels were measured\n    Repaired: CO\u2082 levels were measured\n    Action: CHARACTER_NORMALIZATION (Character normalization fix)\n    Confidence: HIGH\n</code></pre> <p>Already valid:</p> <pre><code>Result:\n  \u2713 Text already valid - no repair needed\n</code></pre> <p>Could not repair:</p> <pre><code>Result:\n  \u2717 Could not repair: Flagged for removal - text not found in reference\n    Suggestion: REMOVAL\n    Confidence: VERY_LOW (12%)\n</code></pre>"},{"location":"reference/cli/#repair-data","title":"repair data","text":"<p>Repair supporting text in data files.</p>"},{"location":"reference/cli/#usage_3","title":"Usage","text":"<pre><code>linkml-reference-validator repair data [OPTIONS] DATA_FILE\n</code></pre>"},{"location":"reference/cli/#arguments_3","title":"Arguments","text":"<ul> <li>DATA_FILE (required) - Path to data file (YAML)</li> </ul>"},{"location":"reference/cli/#options_4","title":"Options","text":"<ul> <li><code>--schema PATH, -s PATH</code> (required) - Path to LinkML schema file</li> <li><code>--target-class TEXT, -t TEXT</code> - Target class to validate</li> <li><code>--dry-run / --no-dry-run, -n / -N</code> - Show changes without applying (default: dry-run)</li> <li><code>--auto-fix-threshold FLOAT, -a FLOAT</code> - Minimum similarity for auto-fixes (default: 0.95)</li> <li><code>--output PATH, -o PATH</code> - Output file path (default: overwrite with backup)</li> <li><code>--config PATH</code> - Path to repair configuration file</li> <li><code>--cache-dir PATH, -c PATH</code> - Directory for caching references</li> <li><code>--verbose, -v</code> - Verbose output with detailed logging</li> <li><code>--help</code> - Show help message</li> </ul>"},{"location":"reference/cli/#examples_3","title":"Examples","text":"<p>Dry run (default):</p> <pre><code>linkml-reference-validator repair data \\\n  disease.yaml \\\n  --schema schema.yaml \\\n  --dry-run\n</code></pre> <p>Apply repairs:</p> <pre><code>linkml-reference-validator repair data \\\n  disease.yaml \\\n  --schema schema.yaml \\\n  --no-dry-run\n</code></pre> <p>Output to new file:</p> <pre><code>linkml-reference-validator repair data \\\n  disease.yaml \\\n  --schema schema.yaml \\\n  --no-dry-run \\\n  --output repaired.yaml\n</code></pre> <p>With configuration file:</p> <pre><code>linkml-reference-validator repair data \\\n  disease.yaml \\\n  --schema schema.yaml \\\n  --config .linkml-reference-validator.yaml\n</code></pre> <p>Custom threshold:</p> <pre><code>linkml-reference-validator repair data \\\n  disease.yaml \\\n  --schema schema.yaml \\\n  --auto-fix-threshold 0.98 \\\n  --no-dry-run\n</code></pre>"},{"location":"reference/cli/#exit-codes_3","title":"Exit Codes","text":"<ul> <li><code>0</code> - Repair completed (may have suggestions)</li> <li><code>1</code> - Repair completed but has removals or unverifiable items</li> </ul>"},{"location":"reference/cli/#output-format_3","title":"Output Format","text":"<pre><code>[DRY RUN] Repairing disease.yaml\n  Schema: schema.yaml\n  Auto-fix threshold: 0.95\n  Cache directory: references_cache\n\nFound 5 evidence item(s) to process\n\n============================================================\nRepair Report\n============================================================\n\nHIGH CONFIDENCE FIXES (auto-applicable):\n  PMID:12345678 at evidence[0]:\n    Character normalization fix\n    'CO2 levels...' \u2192 'CO\u2082 levels...'\n\nSUGGESTED FIXES (review recommended):\n  PMID:23456789 at evidence[1]:\n    Inserted ellipsis between non-contiguous parts\n\nRECOMMENDED REMOVALS (low confidence):\n  PMID:34567890 at evidence[2]:\n    Similarity: 8%\n    Snippet: 'Fabricated text...'\n\n------------------------------------------------------------\nSummary:\n  Total items: 5\n  Already valid: 2\n  Auto-fixes: 1\n  Suggestions: 1\n  Removals: 1\n  Unverifiable: 0\n</code></pre>"},{"location":"reference/cli/#repair-configuration-file","title":"Repair Configuration File","text":"<p>Create <code>.linkml-reference-validator.yaml</code> for project-specific settings:</p> <pre><code>repair:\n  # Confidence thresholds\n  auto_fix_threshold: 0.95\n  suggest_threshold: 0.80\n  removal_threshold: 0.50\n\n  # Character mappings\n  character_mappings:\n    \"+/-\": \"\u00b1\"\n    \"CO2\": \"CO\u2082\"\n    \"H2O\": \"H\u2082O\"\n\n  # References to skip\n  skip_references:\n    - \"PMID:12345678\"\n\n  # References trusted despite low similarity\n  trusted_low_similarity:\n    - \"PMID:98765432\"\n</code></pre>"},{"location":"reference/cli/#cache","title":"cache","text":"<p>Manage reference cache.</p> <pre><code>linkml-reference-validator cache COMMAND [ARGS]...\n</code></pre>"},{"location":"reference/cli/#subcommands_2","title":"Subcommands","text":"<ul> <li><code>reference</code> - Cache a reference for offline use</li> </ul>"},{"location":"reference/cli/#cache-reference","title":"cache reference","text":"<p>Pre-fetch and cache a reference for offline use.</p>"},{"location":"reference/cli/#usage_4","title":"Usage","text":"<pre><code>linkml-reference-validator cache reference [OPTIONS] REFERENCE_ID\n</code></pre>"},{"location":"reference/cli/#arguments_4","title":"Arguments","text":"<ul> <li>REFERENCE_ID (required) - Reference ID (e.g., PMID:12345678 or DOI:10.1234/example)</li> </ul>"},{"location":"reference/cli/#options_5","title":"Options","text":"<ul> <li><code>--cache-dir PATH, -c PATH</code> - Directory for caching references (default: <code>references_cache</code>)</li> <li><code>--force, -f</code> - Force re-fetch even if cached</li> <li><code>--verbose, -v</code> - Verbose output with detailed logging</li> <li><code>--help</code> - Show help message</li> </ul>"},{"location":"reference/cli/#examples_4","title":"Examples","text":"<p>Cache a reference:</p> <pre><code>linkml-reference-validator cache reference PMID:16888623\n</code></pre> <p>Force refresh:</p> <pre><code>linkml-reference-validator cache reference \\\n  PMID:16888623 \\\n  --force\n</code></pre> <p>Custom cache directory:</p> <pre><code>linkml-reference-validator cache reference \\\n  PMID:16888623 \\\n  --cache-dir /path/to/cache\n</code></pre> <p>Cache a DOI:</p> <pre><code>linkml-reference-validator cache reference DOI:10.1038/nature12373\n</code></pre>"},{"location":"reference/cli/#output-format_4","title":"Output Format","text":"<pre><code>Fetching PMID:16888623...\nSuccessfully cached PMID:16888623\n  Title: MUC1 oncoprotein blocks nuclear targeting...\n  Authors: Raina D, Ahmad R, Joshi MD\n  Content type: abstract_only\n  Content length: 1523 characters\n</code></pre>"},{"location":"reference/cli/#reference-id-formats","title":"Reference ID Formats","text":""},{"location":"reference/cli/#pubmed-pmid","title":"PubMed (PMID)","text":"<pre><code>PMID:12345678\nPMID:9876543\n</code></pre> <ul> <li>Numeric identifier only</li> <li>Fetches abstract and metadata from NCBI</li> </ul>"},{"location":"reference/cli/#pubmed-central-pmc","title":"PubMed Central (PMC)","text":"<pre><code>PMC:3458566\nPMC:7654321\n</code></pre> <ul> <li>Numeric identifier only</li> <li>Fetches full-text when available</li> </ul>"},{"location":"reference/cli/#doi-digital-object-identifier","title":"DOI (Digital Object Identifier)","text":"<pre><code>DOI:10.1038/nature12373\nDOI:10.1126/science.1234567\n</code></pre> <ul> <li>Standard DOI format (10.prefix/suffix)</li> <li>Fetches metadata from Crossref API</li> <li>Abstract availability depends on publisher</li> </ul>"},{"location":"reference/cli/#environment-variables","title":"Environment Variables","text":""},{"location":"reference/cli/#linkml_reference_validator_cache_dir","title":"LINKML_REFERENCE_VALIDATOR_CACHE_DIR","text":"<p>Override default cache directory:</p> <pre><code>export LINKML_REFERENCE_VALIDATOR_CACHE_DIR=/custom/cache\nlinkml-reference-validator validate text \"...\" PMID:12345678\n</code></pre>"},{"location":"reference/cli/#ncbi_api_key","title":"NCBI_API_KEY","text":"<p>Set NCBI API key for higher rate limits:</p> <pre><code>export NCBI_API_KEY=your_api_key_here\nlinkml-reference-validator validate text \"...\" PMID:12345678\n</code></pre> <p>Request an API key: https://www.ncbi.nlm.nih.gov/account/settings/</p>"},{"location":"reference/cli/#shell-integration","title":"Shell Integration","text":""},{"location":"reference/cli/#exit-code-usage","title":"Exit Code Usage","text":"<pre><code>if linkml-reference-validator validate text \\\n    \"MUC1 oncoprotein blocks nuclear targeting\" \\\n    PMID:16888623 &gt; /dev/null 2&gt;&amp;1; then\n  echo \"\u2713 Valid\"\nelse\n  echo \"\u2717 Invalid\"\nfi\n</code></pre>"},{"location":"reference/cli/#batch-processing","title":"Batch Processing","text":"<pre><code>for pmid in PMID:111 PMID:222 PMID:333; do\n  echo \"Validating $pmid...\"\n  linkml-reference-validator validate text \\\n    \"some text\" \\\n    \"$pmid\"\ndone\n</code></pre>"},{"location":"reference/cli/#piping-output","title":"Piping Output","text":"<pre><code># Save output to file\nlinkml-reference-validator validate text \\\n  \"...\" PMID:12345678 \\\n  &gt; validation_result.txt\n\n# Grep for specific info\nlinkml-reference-validator validate data \\\n  data.yaml \\\n  --schema schema.yaml \\\n  | grep \"Valid:\"\n</code></pre>"},{"location":"reference/cli/#backward-compatibility","title":"Backward Compatibility","text":"<p>Old hyphenated commands still work but are deprecated:</p> <pre><code># Old (deprecated but working)\nlinkml-reference-validator validate-text \"...\" PMID:123\nlinkml-reference-validator validate-data data.yaml --schema schema.yaml\nlinkml-reference-validator cache-reference PMID:123\n\n# New (preferred)\nlinkml-reference-validator validate text \"...\" PMID:123\nlinkml-reference-validator validate data data.yaml --schema schema.yaml\nlinkml-reference-validator cache reference PMID:123\n</code></pre> <p>The old commands are hidden from <code>--help</code> but continue to function.</p>"},{"location":"reference/cli/#see-also","title":"See Also","text":"<ul> <li>Quickstart - Get started quickly</li> <li>Tutorial 1 - CLI examples</li> <li>Python API Reference - Programmatic usage</li> </ul>"}]}